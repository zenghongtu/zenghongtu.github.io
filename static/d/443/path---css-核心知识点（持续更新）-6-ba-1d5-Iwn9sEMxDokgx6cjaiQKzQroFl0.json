{"data":{"post":{"id":"8fed252b-5867-51a7-911f-2f95c4ca6830","html":"<blockquote>\n<p>最近复习 CSS 知识遇到一些之前模糊或者忘记了的知识点，这里把它们都记下来，有时间就看看，加强记忆。</p>\n</blockquote>\n<h2>Box 和 FC（即 formatting context）</h2>\n<h3>Box</h3>\n<p>一个页面是由很多个 Box 组成的，元素的类型和 display 属性决定了这个 Box 的类型。不同类型的 Box，会参与不同的 Formatting Context。</p>\n<p>Block level的box会参与形成BFC，比如display值为block，list-item，table的元素。</p>\n<p>Inline level的box会参与形成IFC，比如display值为inline，inline-table，inline-block的元素。</p>\n<h3>FC（Formatting Context）</h3>\n<p>它是W3C CSS2.1规范中的一个概念，定义的是页面中的一块渲染区域，并且有一套渲染规则，它决定了其子元素将如何定位，以及和其他元素的关系和相互作用。</p>\n<p>常见的Formatting Context 有：Block Formatting Context（BFC | 块级格式化上下文） 和 Inline Formatting Context（IFC |行内格式化上下文）。</p>\n<h2>BFC</h2>\n<h3>规则</h3>\n<ol>\n<li>内部的Box会在垂直方向，一个接一个地放置。</li>\n<li>Box垂直方向的距离由margin决定。属于同一个BFC的两个相邻Box的margin会发生重叠</li>\n<li>每个元素的左外边缘（margin-left)， 与包含块的左边（contain box left）相接触(对于从左往右的格式化，否则相反)。即使存在浮动也是如此。除非这个元素自己形成了一个新的BFC。</li>\n<li>BFC的区域不会与float box重叠。</li>\n<li>BFC就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素。反之也如此。</li>\n<li>计算BFC的高度时，浮动元素也参与计算</li>\n</ol>\n<h3>形成规则</h3>\n<ol>\n<li>根元素或其它包含它的元素</li>\n<li>浮动 (元素的 float 不是 none)</li>\n<li>绝对定位的元素 (元素具有 position 为 absolute 或 fixed)</li>\n<li>非块级元素具有 display: inline-block，table-cell, table-caption, flex, inline-flex</li>\n<li>块级元素具有overflow ，且值不是 visible</li>\n</ol>\n<p>为什么display: inline-block;的元素是inline level 的元素，参与形成IFC，却能创建BFC？</p>\n<blockquote>\n<p>inline-block的元素的内部是一个BFC，但是它本身可以和其它inline元素一起形成IFC。</p>\n</blockquote>\n<h3>用处</h3>\n<ol>\n<li>清除浮动，解决父级元素塌陷问题</li>\n<li>布局：对于两栏或三栏浮动自适应布局，包含块边接触问题。</li>\n<li>防止垂直margin出现重合</li>\n<li>可以阻止元素被浮动元素覆盖</li>\n</ol>\n<h2>IFC布局规则</h2>\n<p>在行内格式化上下文中，框(boxes)一个接一个地水平排列，起点是包含块的顶部。水平方向上的 margin，border 和 padding在框之间得到保留。框在垂直方向上可以以不同的方式对齐：它们的顶部或底部对齐，或根据其中文字的基线对齐。包含那些框的长方形区域，会形成一行，叫做行框。</p>\n<h2>清除浮动</h2>\n<p>一般有两种思路：</p>\n<ul>\n<li>\n<p>添加新的元素 、应用 clear：both；</p>\n<blockquote>\n<p>给父元素再加一个块级子容器，当然这个也就是父元素的最后一个块级子容器了。同时给这个块级子容器设置clear属性来清除其浮动，这样这个子容器就能排列在浮动元素的后面，同时也把父元素的高度撑起来了。那么父元素的同级元素也能正常排列了。所以这个子容器不能有高度和内容，不然会影响父元素的布局。</p>\n</blockquote>\n</li>\n<li>\n<p>父元素添加伪元素、应用display:block、content:”、clear:both</p>\n<blockquote>\n<p>伪元素清除浮动的核心原理其实是在给父元素增加块级容器，同时对块级容器设置clear属性，使其能够清除自身的浮动，从而正常按照块级容器排列方式那样排列在浮动元素的下面。同时，父元素的同级元素也会正常排列在伪元素形成的块级元素后面，而不受浮动影响。</p>\n</blockquote>\n</li>\n<li>\n<p>使父容器形成BFC</p>\n<blockquote>\n<p>计算 BFC 的高度时，浮动子元素也参与计算</p>\n</blockquote>\n</li>\n</ul>\n<h2>层叠上下文</h2>\n<h3>z-index</h3>\n<ul>\n<li>\n<p>定位元素默认z-index:auto可以看成是z-index:0（层级理解上）；</p>\n<blockquote>\n<p>定位元素会覆盖普通元素。因为：z-index只对定位元素起作用，z-index:auto的层叠顺序大于图片这个内联元素。\n如果层叠上下文元素不依赖z-index数值，则其层叠顺序是z-index:auto可看成z:index:0级别；\n如果层叠上下文元素依赖z-index数值，则其层叠顺序由z-index值决定。</p>\n</blockquote>\n</li>\n<li>\n<p>z-index不为auto的定位元素会创建层叠上下文；</p>\n<blockquote>\n<p>z-index负值的层叠顺序在层叠上下文元素背景色之上</p>\n</blockquote>\n</li>\n<li>z-index层叠顺序的比较止步于父级层叠上下文；</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token style-attr language-css\"><span class=\"token attr-name\"> <span class=\"token attr-name\">style</span></span><span class=\"token punctuation\">=\"</span><span class=\"token attr-value\"><span class=\"token property\">position</span><span class=\"token punctuation\">:</span>relative<span class=\"token punctuation\">;</span> <span class=\"token property\">z-index</span><span class=\"token punctuation\">:</span>auto<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>mm1.jpg<span class=\"token punctuation\">\"</span></span><span class=\"token style-attr language-css\"><span class=\"token attr-name\"> <span class=\"token attr-name\">style</span></span><span class=\"token punctuation\">=\"</span><span class=\"token attr-value\"><span class=\"token property\">position</span><span class=\"token punctuation\">:</span>absolute<span class=\"token punctuation\">;</span> <span class=\"token property\">z-index</span><span class=\"token punctuation\">:</span>2<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>--</span> <span class=\"token attr-name\">横妹子</span> <span class=\"token attr-name\">--</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token style-attr language-css\"><span class=\"token attr-name\"> <span class=\"token attr-name\">style</span></span><span class=\"token punctuation\">=\"</span><span class=\"token attr-value\"><span class=\"token property\">position</span><span class=\"token punctuation\">:</span>relative<span class=\"token punctuation\">;</span> <span class=\"token property\">z-index</span><span class=\"token punctuation\">:</span>auto<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>mm2.jpg<span class=\"token punctuation\">\"</span></span><span class=\"token style-attr language-css\"><span class=\"token attr-name\"> <span class=\"token attr-name\">style</span></span><span class=\"token punctuation\">=\"</span><span class=\"token attr-value\"><span class=\"token property\">position</span><span class=\"token punctuation\">:</span>relative<span class=\"token punctuation\">;</span> <span class=\"token property\">z-index</span><span class=\"token punctuation\">:</span>1<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>--</span> <span class=\"token attr-name\">竖妹子</span> <span class=\"token attr-name\">--</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><code class=\"language-text\">z-index</code>为<code class=\"language-text\">auto</code>不会创建层叠上下文，即所在的<code class=\"language-text\">&lt;div&gt;</code>元素时一个普通的元素，里面的<code class=\"language-text\">&lt;img&gt;</code>的层叠比较不受父元素的影响，两者直接套用层叠准则，所以 mm1会把 mm2 给覆盖了。</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token style-attr language-css\"><span class=\"token attr-name\"> <span class=\"token attr-name\">style</span></span><span class=\"token punctuation\">=\"</span><span class=\"token attr-value\"><span class=\"token property\">position</span><span class=\"token punctuation\">:</span>relative<span class=\"token punctuation\">;</span> <span class=\"token property\">z-index</span><span class=\"token punctuation\">:</span>0<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>mm1.jpg<span class=\"token punctuation\">\"</span></span><span class=\"token style-attr language-css\"><span class=\"token attr-name\"> <span class=\"token attr-name\">style</span></span><span class=\"token punctuation\">=\"</span><span class=\"token attr-value\"><span class=\"token property\">position</span><span class=\"token punctuation\">:</span>absolute<span class=\"token punctuation\">;</span> <span class=\"token property\">z-index</span><span class=\"token punctuation\">:</span>2<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>--</span> <span class=\"token attr-name\">横妹子</span> <span class=\"token attr-name\">--</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token style-attr language-css\"><span class=\"token attr-name\"> <span class=\"token attr-name\">style</span></span><span class=\"token punctuation\">=\"</span><span class=\"token attr-value\"><span class=\"token property\">position</span><span class=\"token punctuation\">:</span>relative<span class=\"token punctuation\">;</span> <span class=\"token property\">z-index</span><span class=\"token punctuation\">:</span>0<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>mm2.jpg<span class=\"token punctuation\">\"</span></span><span class=\"token style-attr language-css\"><span class=\"token attr-name\"> <span class=\"token attr-name\">style</span></span><span class=\"token punctuation\">=\"</span><span class=\"token attr-value\"><span class=\"token property\">position</span><span class=\"token punctuation\">:</span>relative<span class=\"token punctuation\">;</span> <span class=\"token property\">z-index</span><span class=\"token punctuation\">:</span>1<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>--</span> <span class=\"token attr-name\">竖妹子</span> <span class=\"token attr-name\">--</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><code class=\"language-text\">z-index</code>为<code class=\"language-text\">0</code>会创建层叠上下文，即 z-index:0 所在的<code class=\"language-text\">&lt;div&gt;</code>元素时层叠上下文，由于是两个层叠上下文，所以里面的<code class=\"language-text\">&lt;img&gt;</code>的层叠比较变成了优先比较其父元素层叠上下文的层叠顺序，由于这里两者都是·z-index:\n0`，后来的会比前面的高，所以 mm2 会把 mm1 给覆盖了。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/81432f9c42c1149b67efa3dcc808917b/f50a8/20190325154805828_194279989.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 76.45985401459853%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAADYklEQVQ4y12T7U9bZRjG+Rf0syYmc6hfNPMDGjURpsQtyxyCizrNxC0G10XnDMZsCvqBkPjyyWhExBmzRZ1xviwOt1FKCxRaMxi21LasLysrfTnQlr635/T053POoRV9kjv3fZ4893Wu576up0VVVeRqlUqpRKVcFlHS66pWi/1aTUE7U6vV9Nyot6/GvqIotChiI3L+O8Kn+4m8/y6RwdNEBk6xKnLgtaOklj16kyLLOpDWpK1QKITL5cLn81EsFvU9WZxpqYoiOjRI6uH7iXU9Sfzpdtb2t4vcQXh3G2vTE1RqZaqVUpNtWbB3u904nU4WFxdJJpPU6/V/GUYFw+AbJvyfHCL5bS/rZ44inelF+uEkqS+6iI8dppjONK+XTqeJxWKkUikkSSIej+tgOqAqrqFNpFCrk/zeRHakg6WzPbjOHsR17nmuf70H5zfdzLsvEkh4kBVjlv9fzRmqqjggQGVZQXL+xvKlYT6ce5YR1xE+XehhwN7GB3MP8d70fYzOvWJ014WQW4wasQ3QUK2hXDQjccr8ICev7qN/akgADdFvHaJvcoC3LZ8z5vaycCtqCLWlvNbbnKGBbADWayqFQg5PxMzon+O87Fymf8nLq44lemyLPDd7jU6LhXOu6xqcYCk3e//DUFXr+h9UAahuWcweifGiw8ZTY3+w56NJXvhyls6PrewatLBveIaDw3YWVhKGXZRtgBp6SRhZ85BclSmXNItUkFJp8oUM74xe487eWR49YeeBIzZ2Hpqi9bCV2w+Mc+GyH6VQFj1VnYwOqIHdEjPx+1f42+MlEUuwenOVUCBMrZhn5Je/aDP9TPfjlzA9Mc2xvTZ6H5uir9OKqX1GhBVpY1NnWhWEWjSX5/N5otEok2YLXgEaDobJ5/Ik4kkqxRKJtTBvdlh55rYZjt0zyfFWC8fvtdB39xSv7zLjmQiSCWX0p9pS0a4nzJnN5pCSEuvSOtnNLBvrG+Q2c4bHxFh+/crLZ285uLjbzMx+B7YuB9Pd89hfcjK+w8bEgVnyxVxDZeElWailCAuIrFQVPTe+a7Jh5Eq+wOVHrFy5y86VVhE7ROwUcYcdy955coVsw4eG0obKRtTFy1GVxnddBy/nK6z8HsT34w38FwL4fwro2Xf+BsGrN4WYVf4BHS4KZEwiijEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;\"\n        alt=\"20190325154805828 194279989\"\n        title=\"\"\n        src=\"/static/81432f9c42c1149b67efa3dcc808917b/b21dd/20190325154805828_194279989.png\"\n        srcset=\"/static/81432f9c42c1149b67efa3dcc808917b/2d451/20190325154805828_194279989.png 200w,\n/static/81432f9c42c1149b67efa3dcc808917b/06807/20190325154805828_194279989.png 400w,\n/static/81432f9c42c1149b67efa3dcc808917b/b21dd/20190325154805828_194279989.png 800w,\n/static/81432f9c42c1149b67efa3dcc808917b/f50a8/20190325154805828_194279989.png 1096w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3>触发条件</h3>\n<ol>\n<li>\n<p>根层叠上下文(html)</p>\n<blockquote>\n<p>指的是页面根元素，也就是滚动条的默认的始作俑者<code class=\"language-text\">&lt;html&gt;</code>元素。这就是为什么，绝对定位元素在left/top等值定位的时候，如果没有其他定位元素限制，会相对浏览器窗口定位的原因。</p>\n</blockquote>\n</li>\n<li>\n<p>position</p>\n<blockquote>\n<p>对于包含有position:relative/position:absolute/position:fixed声明的定位元素，当其z-index值不是auto的时候，会创建层叠上下文。</p>\n</blockquote>\n</li>\n<li>\n<p>css3属性</p>\n<ul>\n<li>flex</li>\n<li>transform</li>\n<li>opacity</li>\n<li>filter</li>\n<li>will-change</li>\n<li>-webkit-overflow-scrolling</li>\n</ul>\n</li>\n</ol>\n<h2>transform和 fixed</h2>\n<p>transform会把position:fixed固定效果直接降级变成position:absolute的表现（目前只在Chrome浏览器/FireFox浏览器下有）</p>\n<h2>css绝对定位、相对定位和文档流</h2>\n<p>文档流：确切的说应该是文档文档流模型的机制，html的布局机制就是用文档流模型的，即块元素（block）独占一行，内联元素（inline）。不独占一行</p>\n<p>相对定位：用left right top b0ttom进行定位后，元素会根据原来的位置进行移动，但由于position:relative这个属性并没有脱离文档流的，所以元素本身所占的位置会保留。</p>\n<p>绝对定位：脱离文档流的元素，其他盒子与其他盒子内的文本都会无视它</p>\n<h2>外边距合并</h2>\n<p>块级元素的<strong><em>上外边距和下外边距有时会合并</em></strong>（或折叠）为一个外边距，其大小取其中的最大者，这种行为称为外边距折叠（margin collapsing），有时也翻译为外边距合并。注意<strong>浮动元素和绝对定位元素的外边距不会折叠</strong>。</p>\n<p>会发生外边距折叠的三种基本情况：</p>\n<ul>\n<li>相邻兄弟块元素间</li>\n<li>父元素及其首子元素和末子元素间（没有边框、内边距、行内内容，也没有创建块格式化上下文、或者清除浮动将两者分开）</li>\n<li>空块级元素自身的合并（margin-top 与 margin-bottom 之间没有边框、内边距、行内内容、height、min-height 将两者分开）</li>\n</ul>","fields":{"slug":"/CSS 核心知识点（持续更新）/","prefix":"2019-03-25"},"frontmatter":{"title":"CSS 核心知识点（持续更新）","author":"Jason Zeng","category":"CSS","cover":{"childImageSharp":{"resize":{"src":"/static/2e0b037e206a46254ed44f3a2b389e40/ada8c/photo-1519681393784-d120267933ba.jpeg"}}}}},"authornote":{"id":"eeaf3f36-861e-5339-a4a4-e63a63ccd23c","html":"<p><a href=\"https://github.com/zenghongtu\">Jason Zeng</a></p>"},"site":{"siteMetadata":{"facebook":{"appId":"2349655921921608"}}}},"pageContext":{"slug":"/CSS 核心知识点（持续更新）/","prev":{"id":"2e98a99f-71d6-58d4-a402-6f1a94c91bd0","fields":{"slug":"/30行代码实现一个带并发数限制的fetch请求函数/","prefix":"2019-03-14","source":"posts"},"frontmatter":{"title":"23行代码实现一个带并发数限制的fetch请求函数","category":"思考"}},"next":{"id":"ccb1c8e5-d57d-5b38-a349-adb783458ffa","fields":{"slug":"/一个纯 CSS 实现的'简约'搜索框/","prefix":"2019-04-05","source":"posts"},"frontmatter":{"title":"一个纯 CSS 实现的'简约'搜索框","category":"CSS"}},"source":"posts"}}