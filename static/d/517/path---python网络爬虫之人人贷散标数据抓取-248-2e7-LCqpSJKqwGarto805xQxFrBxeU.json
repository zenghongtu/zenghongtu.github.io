{"data":{"post":{"id":"cbb37bcb-dfed-5bba-a58b-95ebb44007ab","html":"<ol>\n<li>登录\n借款人的详细信息需要登录后才能查看，因此爬虫需要模拟登录</li>\n</ol>\n<p>Cookie登录\n直接获取登录后的cookie填入请求的headers中</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">cookie<span class=\"token operator\">=</span><span class=\"token string\">''</span><span class=\"token comment\">#填写cookie</span>\nheaders <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'User-Agent'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:39.0) Gecko/20100101 Firefox/39.0'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'Accept'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'Accept-Language'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'en-US,en;q=0.5'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'Cookie'</span><span class=\"token punctuation\">:</span>cookie<span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'Accept-Encoding'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'gzip, deflate'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'Connection'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'keep-alive'</span><span class=\"token punctuation\">}</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span>post登录\n <span class=\"token keyword\">def</span> <span class=\"token function\">login</span><span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">,</span>password<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n     session<span class=\"token operator\">=</span>requests<span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n     data<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>\n         <span class=\"token string\">'j_username'</span><span class=\"token punctuation\">:</span>username<span class=\"token punctuation\">,</span>\n         <span class=\"token string\">'j_password'</span><span class=\"token punctuation\">:</span>password<span class=\"token punctuation\">,</span><span class=\"token comment\">#password是加密后的</span>\n         <span class=\"token string\">'rememberme'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'on'</span><span class=\"token punctuation\">,</span>\n         <span class=\"token string\">'targetUrl'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'http://www.we.com/'</span><span class=\"token punctuation\">,</span>\n         <span class=\"token string\">'returnUrl'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'https://www.we.com/account/index.action'</span><span class=\"token punctuation\">}</span>\n    session<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">(</span><span class=\"token string\">'https://www.we.com/j_spring_security_check'</span><span class=\"token punctuation\">,</span>data<span class=\"token operator\">=</span>data<span class=\"token punctuation\">,</span>headers<span class=\"token operator\">=</span>headers<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> session</code></pre></div>\n<ol start=\"2\">\n<li>抓取</li>\n</ol>\n<p>散标的链接是：<a href=\"http://www.we.com/loan/2071082\">http://www.we.com/loan/2071082</a> ,每一个标对应一个id,改变id就可以获取到不同的标\n目前人人贷上id的范围从1-808500,2000001-2071082,因此可以编写一个循环来获取所有的标</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    id_from<span class=\"token operator\">=</span><span class=\"token number\">2007050</span><span class=\"token comment\">#起始id</span>\n    id_to<span class=\"token operator\">=</span><span class=\"token number\">2008550</span><span class=\"token comment\">#结束id</span>\n    <span class=\"token keyword\">for</span> load_id <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>id_from<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>id_to<span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n            items<span class=\"token operator\">=</span>get_page<span class=\"token punctuation\">(</span><span class=\"token string\">'http://www.we.com/loan/'</span><span class=\"token operator\">+</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>load_id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#获取标的信息</span>\n        <span class=\"token keyword\">except</span><span class=\"token punctuation\">:</span>\n            failed_f<span class=\"token operator\">=</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'failed.txt'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#失败则写入failed</span>\n            failed_f<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>load_id<span class=\"token punctuation\">)</span><span class=\"token operator\">+</span>'\n'<span class=\"token punctuation\">)</span>\n            failed_f<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>load_id<span class=\"token punctuation\">,</span><span class=\"token string\">'failed'</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">continue</span>\n        items<span class=\"token punctuation\">[</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>load_id<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>load_id<span class=\"token punctuation\">,</span><span class=\"token string\">'ok'</span><span class=\"token punctuation\">)</span>\n        write_to_text<span class=\"token punctuation\">(</span>items<span class=\"token punctuation\">)</span><span class=\"token comment\">#写入文件</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">write_to_text</span><span class=\"token punctuation\">(</span>items<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><span class=\"token comment\">#写入文件</span>\n    text_f<span class=\"token operator\">=</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'result.txt'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span>\n    text<span class=\"token operator\">=</span><span class=\"token string\">''</span>\n    <span class=\"token keyword\">for</span> key <span class=\"token keyword\">in</span> keys<span class=\"token punctuation\">:</span>\n        text<span class=\"token operator\">+=</span>items<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span><span class=\"token string\">' '</span><span class=\"token punctuation\">,</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">' ||'</span>\n    text_f<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span>text<span class=\"token operator\">+</span>'\n'<span class=\"token punctuation\">)</span>\n    text_f<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">get_page</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><span class=\"token comment\">#获取页面并解析</span>\n    html<span class=\"token operator\">=</span>requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span>headers<span class=\"token operator\">=</span>headers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>text\n    infor<span class=\"token operator\">=</span>parser<span class=\"token punctuation\">(</span>html<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> infor</code></pre></div>\n<ol start=\"3\">\n<li>解析</li>\n</ol>\n<p>使用BeautifulSoup4，lxml解析网页，解析程序是根据网页编写的，要看懂代码需要结合网页</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">parser</span><span class=\"token punctuation\">(</span>html<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    soup<span class=\"token operator\">=</span>BeautifulSoup<span class=\"token punctuation\">(</span>html<span class=\"token punctuation\">,</span><span class=\"token string\">'lxml'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token string\">'pg-loan-invest'</span><span class=\"token punctuation\">)</span>\n    infor_one<span class=\"token operator\">=</span>soup<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token string\">'loan-basic-panel'</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Loan_type'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>infor_one<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'fn-left fn-text-overflow pl25'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'title'</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Loan_Title'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>infor_one<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'title-text'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    em<span class=\"token operator\">=</span>infor_one<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'fn-clear'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find_all<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Amount'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Interest_Rate'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Term'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    ul<span class=\"token operator\">=</span>infor_one<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'fn-left pt10 loaninfo '</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'ul'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find_all<span class=\"token punctuation\">(</span><span class=\"token string\">'li'</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Guarantee_Type'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>ul<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'span'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'fn-left basic-value last'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Early_Repayment_Rate'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>ul<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'span'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'fn-left basic-value num'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Repayment_Type'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>ul<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'span'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'fn-left basic-value'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    statue<span class=\"token operator\">=</span>infor_one<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'pl25 pr25 fn-clear'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'stamp'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Loan_Status'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>statue<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">if</span> statue<span class=\"token operator\">==</span><span class=\"token punctuation\">[</span><span class=\"token string\">'REPAYING'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\n        infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Term_Remain'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>infor_one<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'pl25 pr25 fn-clear'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'box box-top'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'i'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Next_Payment_Day'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>infor_one<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'pl25 pr25 fn-clear'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'box box-bottom'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'i'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n        infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Term_Remain'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token string\">''</span>\n        infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Next_Payment_Day'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token string\">''</span>\n    table<span class=\"token operator\">=</span>soup<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token string\">'loan-details'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'table'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'ui-table-basic-list'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find_all<span class=\"token punctuation\">(</span><span class=\"token string\">'tr'</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Borrower_Id'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>table<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Userid'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>table<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'href'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span><span class=\"token string\">'/account/myInfo.action?userId='</span><span class=\"token punctuation\">,</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Credit_Score'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>table<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>find_all<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'title'</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Des'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>soup<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'ui-tab-list color-dark-text'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    em<span class=\"token operator\">=</span>table<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>find_all<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Age'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Education'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Marital status'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    em<span class=\"token operator\">=</span>table<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>find_all<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Number_of_Borrow'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Credit_Limit'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Overdue_amount'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    em<span class=\"token operator\">=</span>table<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>find_all<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Number_of_Succesful_Loan'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Total_Amount'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Number_Arrears'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    em<span class=\"token operator\">=</span>table<span class=\"token punctuation\">[</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>find_all<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Number_of_Repaid'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Outstanding'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Severe_overdue'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    em<span class=\"token operator\">=</span>table<span class=\"token punctuation\">[</span><span class=\"token number\">8</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>find_all<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Income_Range_Monthly'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Homeowner'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Mortgage'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    em<span class=\"token operator\">=</span>table<span class=\"token punctuation\">[</span><span class=\"token number\">9</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>find_all<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Car'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Car_Loan'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    em<span class=\"token operator\">=</span>table<span class=\"token punctuation\">[</span><span class=\"token number\">11</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>find_all<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Working_City'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Emploment_Length'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> item <span class=\"token keyword\">in</span> soup<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token string\">'loan-details'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'table'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'ui-table-basic-list'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find_all<span class=\"token punctuation\">(</span><span class=\"token string\">'td'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> item<span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token operator\">==</span>u<span class=\"token string\">'公司行业'</span><span class=\"token punctuation\">:</span>\n            infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Employment_Sector'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>item<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> item<span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token operator\">==</span>u<span class=\"token string\">'公司规模'</span><span class=\"token punctuation\">:</span>\n            infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Company_Scale'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>item<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> item<span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token operator\">==</span>u<span class=\"token string\">'岗位职位'</span><span class=\"token punctuation\">:</span>\n            infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Position'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>item<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> infor</code></pre></div>\n<ol start=\"4\">\n<li>完整代码</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\">#coding:utf-8</span>\n\n<span class=\"token keyword\">import</span> requests\n<span class=\"token keyword\">from</span> bs4 <span class=\"token keyword\">import</span> BeautifulSoup\n\n\nCookie<span class=\"token operator\">=</span><span class=\"token string\">\"\"</span>\nheaders <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'User-Agent'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:39.0) Gecko/20100101 Firefox/39.0'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'Accept'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'Accept-Language'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'en-US,en;q=0.5'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'Cookie'</span><span class=\"token punctuation\">:</span>Cookie<span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'Accept-Encoding'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'gzip, deflate'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'Connection'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'keep-alive'</span><span class=\"token punctuation\">}</span>\n\nkeys<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Loan_Title'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Loan_type'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Loan_Status'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Amount'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Interest_Rate'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Term'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Next_Payment_Day'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Term_Remain'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Repayment_Type'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Des'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Guarantee_Type'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Early_Repayment_Rate'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'Borrower_Id'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Userid'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Age'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Education'</span><span class=\"token punctuation\">,</span>  <span class=\"token string\">'Marital status'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Working_City'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Company_Scale'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Position'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Employment_Sector'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Emploment_Length'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Homeowner'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Mortgage'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Car'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Car_Loan'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'Total_Amount'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Number_of_Succesful_Loan'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Income_Range_Monthly'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Number_of_Borrow'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Number_of_Repaid'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Outstanding'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Overdue_amount'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Severe_overdue'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Credit_Score'</span><span class=\"token punctuation\">,</span>  <span class=\"token string\">'Number_Arrears'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Credit_Limit'</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">write_to_text</span><span class=\"token punctuation\">(</span>items<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    text_f<span class=\"token operator\">=</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'result.txt'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span>encoding<span class=\"token operator\">=</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span>\n    text<span class=\"token operator\">=</span><span class=\"token string\">''</span>\n    <span class=\"token keyword\">for</span> key <span class=\"token keyword\">in</span> lists<span class=\"token punctuation\">:</span>\n        text<span class=\"token operator\">+=</span>items<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span><span class=\"token string\">' '</span><span class=\"token punctuation\">,</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">' ||'</span>\n    text_f<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span>text<span class=\"token operator\">+</span>'\n'<span class=\"token punctuation\">)</span>\n    text_f<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">get_page</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    html<span class=\"token operator\">=</span>requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span>headers<span class=\"token operator\">=</span>headers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>text\n    infor<span class=\"token operator\">=</span>parser<span class=\"token punctuation\">(</span>html<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> infor\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">parser</span><span class=\"token punctuation\">(</span>html<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    soup<span class=\"token operator\">=</span>BeautifulSoup<span class=\"token punctuation\">(</span>html<span class=\"token punctuation\">,</span><span class=\"token string\">'lxml'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token string\">'pg-loan-invest'</span><span class=\"token punctuation\">)</span>\n    infor_one<span class=\"token operator\">=</span>soup<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token string\">'loan-basic-panel'</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Loan_type'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>infor_one<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'fn-left fn-text-overflow pl25'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'title'</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Loan_Title'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>infor_one<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'title-text'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    em<span class=\"token operator\">=</span>infor_one<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'fn-clear'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find_all<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Amount'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Interest_Rate'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Term'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    ul<span class=\"token operator\">=</span>infor_one<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'fn-left pt10 loaninfo '</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'ul'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find_all<span class=\"token punctuation\">(</span><span class=\"token string\">'li'</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Guarantee_Type'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>ul<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'span'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'fn-left basic-value last'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Early_Repayment_Rate'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>ul<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'span'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'fn-left basic-value num'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Repayment_Type'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>ul<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'span'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'fn-left basic-value'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    statue<span class=\"token operator\">=</span>infor_one<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'pl25 pr25 fn-clear'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'stamp'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Loan_Status'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>statue<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">if</span> statue<span class=\"token operator\">==</span><span class=\"token punctuation\">[</span><span class=\"token string\">'REPAYING'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\n        infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Term_Remain'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>infor_one<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'pl25 pr25 fn-clear'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'box box-top'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'i'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Next_Payment_Day'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>infor_one<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'pl25 pr25 fn-clear'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'box box-bottom'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'i'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n        infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Term_Remain'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token string\">''</span>\n        infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Next_Payment_Day'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token string\">''</span>\n    table<span class=\"token operator\">=</span>soup<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token string\">'loan-details'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'table'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'ui-table-basic-list'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find_all<span class=\"token punctuation\">(</span><span class=\"token string\">'tr'</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Borrower_Id'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>table<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Userid'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>table<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'href'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span><span class=\"token string\">'/account/myInfo.action?userId='</span><span class=\"token punctuation\">,</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Credit_Score'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>table<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>find_all<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'title'</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Des'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>soup<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'ui-tab-list color-dark-text'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    em<span class=\"token operator\">=</span>table<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>find_all<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Age'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Education'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Marital status'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    em<span class=\"token operator\">=</span>table<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>find_all<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Number_of_Borrow'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Credit_Limit'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Overdue_amount'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    em<span class=\"token operator\">=</span>table<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>find_all<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Number_of_Succesful_Loan'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Total_Amount'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Number_Arrears'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    em<span class=\"token operator\">=</span>table<span class=\"token punctuation\">[</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>find_all<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Number_of_Repaid'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Outstanding'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Severe_overdue'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    em<span class=\"token operator\">=</span>table<span class=\"token punctuation\">[</span><span class=\"token number\">8</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>find_all<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Income_Range_Monthly'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Homeowner'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Mortgage'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    em<span class=\"token operator\">=</span>table<span class=\"token punctuation\">[</span><span class=\"token number\">9</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>find_all<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Car'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Car_Loan'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    em<span class=\"token operator\">=</span>table<span class=\"token punctuation\">[</span><span class=\"token number\">11</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>find_all<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Working_City'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Emploment_Length'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>em<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>'\n<span class=\"token string\">','</span><span class=\"token string\">').replace('</span>\\t<span class=\"token string\">','</span>'<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> item <span class=\"token keyword\">in</span> soup<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token string\">'loan-details'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'table'</span><span class=\"token punctuation\">,</span>attrs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'ui-table-basic-list'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>find_all<span class=\"token punctuation\">(</span><span class=\"token string\">'td'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> item<span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token operator\">==</span>u<span class=\"token string\">'公司行业'</span><span class=\"token punctuation\">:</span>\n            infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Employment_Sector'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>item<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> item<span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token operator\">==</span>u<span class=\"token string\">'公司规模'</span><span class=\"token punctuation\">:</span>\n            infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Company_Scale'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>item<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> item<span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token operator\">==</span>u<span class=\"token string\">'岗位职位'</span><span class=\"token punctuation\">:</span>\n            infor<span class=\"token punctuation\">[</span><span class=\"token string\">'Position'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>item<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'em'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get_text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> infor\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    id_from<span class=\"token operator\">=</span><span class=\"token number\">2007050</span><span class=\"token comment\">#起始id</span>\n    id_to<span class=\"token operator\">=</span><span class=\"token number\">2008550</span><span class=\"token comment\">#结束id</span>\n    <span class=\"token keyword\">for</span> load_id <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>id_from<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>id_to<span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n            items<span class=\"token operator\">=</span>get_page<span class=\"token punctuation\">(</span><span class=\"token string\">'http://www.we.com/loan/'</span><span class=\"token operator\">+</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>load_id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">except</span><span class=\"token punctuation\">:</span>\n            failed_f<span class=\"token operator\">=</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'failed.txt'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span>encoding<span class=\"token operator\">=</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span>\n            failed_f<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>load_id<span class=\"token punctuation\">)</span><span class=\"token operator\">+</span>'\n'<span class=\"token punctuation\">)</span>\n            failed_f<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>load_id<span class=\"token punctuation\">,</span><span class=\"token string\">'failed'</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">continue</span>\n        items<span class=\"token punctuation\">[</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>load_id<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>load_id<span class=\"token punctuation\">,</span><span class=\"token string\">'ok'</span><span class=\"token punctuation\">)</span>\n        write_to_text<span class=\"token punctuation\">(</span>items<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> __name__<span class=\"token operator\">==</span><span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    main<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ol start=\"5\">\n<li>运行环境</li>\n</ol>\n<p>需要安装BeautifulSoup4,requests,lxml这三个第三方库\nBeautifulSoup4和requests可以直接使用命令安装</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pip <span class=\"token function\">install</span> bs4\npip <span class=\"token function\">install</span> requests</code></pre></div>","fields":{"slug":"/python网络爬虫之人人贷散标数据抓取/","prefix":"2017-05-16"},"frontmatter":{"title":"python网络爬虫之人人贷散标数据抓取","author":"Jason Zeng","category":"爬虫","cover":{"childImageSharp":{"resize":{"src":"/static/d1399ccb7ae4533d72aed9c10e525389/ada8c/cat0.jpg"}}}}},"authornote":{"id":"eeaf3f36-861e-5339-a4a4-e63a63ccd23c","html":"<p><a href=\"https://github.com/zenghongtu\">Jason Zeng</a></p>"},"site":{"siteMetadata":{"facebook":{"appId":"2349655921921608"}}}},"pageContext":{"slug":"/python网络爬虫之人人贷散标数据抓取/","prev":{"id":"3aa72687-a7e4-5614-9f91-73980fca4458","fields":{"slug":"/ECS部署SS科学上网/","prefix":"2017-04-05","source":"posts"},"frontmatter":{"title":"ECS部署SS科学上网","category":"ss"}},"next":{"id":"99bf69d6-7373-5a50-9b76-129feadbc6dc","fields":{"slug":"/PIL生成验证码/","prefix":"2017-07-28","source":"posts"},"frontmatter":{"title":"PIL生成验证码","category":"PIL"}},"source":"posts"}}